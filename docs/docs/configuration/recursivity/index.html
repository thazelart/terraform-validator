<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">

<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"17896441":["/terraform-validator/17896441.ef1828a1.js"],"main":["/terraform-validator/main.c82cc856.js"],"1ba80e33":["/terraform-validator/1ba80e33.4b99303b.js"],"1be78505":[],"2a2a0c40":["/terraform-validator/2a2a0c40.25e08536.js"],"2cf4f0e1":["/terraform-validator/2cf4f0e1.2c478e24.js"],"4a707512":["/terraform-validator/4a707512.c9eb2c4c.js"],"573e56dc":["/terraform-validator/573e56dc.b8b51743.js"],"580fd761":["/terraform-validator/580fd761.faf35cd3.js"],"5fa65190":["/terraform-validator/5fa65190.5287d20f.js"],"674fa5e4":["/terraform-validator/674fa5e4.7b688fb2.js"],"67e2d57a":["/terraform-validator/67e2d57a.75efe1f4.js"],"788addaf":["/terraform-validator/788addaf.5e63ff50.js"],"7b6338ca":["/terraform-validator/7b6338ca.a4115629.js"],"971292e7":["/terraform-validator/971292e7.062a0b5b.js"],"9ff4038f":["/terraform-validator/9ff4038f.d567c414.js"],"a39aaf1d":["/terraform-validator/a39aaf1d.62b25c28.js"],"bc31dbb8":["/terraform-validator/bc31dbb8.08e1b19d.js"],"c4f5d8e4":["/terraform-validator/c4f5d8e4.969305e3.js"],"d701a72f":["/terraform-validator/d701a72f.835df25c.js"],"f89a0118":["/terraform-validator/f89a0118.9d6cc837.js"]};/*]]>*/</script>

<title data-react-helmet="true">Recursivity</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" property="og:title" content="Terraform-Validator · A norms and conventions validator for Terraform"/><meta data-react-helmet="true" property="og:image" content="https://thazelart.github.io//terraform-validator/img/terraform-validator.png"/><meta data-react-helmet="true" property="twitter:image" content="https://thazelart.github.io//terraform-validator/img/terraform-validator.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Terraform-Validator · A norms and conventions validator for Terraform"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="## layers"/><meta data-react-helmet="true" property="og:description" content="## layers"/><meta data-react-helmet="true" property="og:url" content="https://thazelart.github.io//terraform-validator/docs/configuration/recursivity"/>

<link data-react-helmet="true" rel="shortcut icon" href="/terraform-validator/img/terraform-validator-icon.svg"/>


<link rel="stylesheet" type="text/css" href="/terraform-validator/styles.2244afbd.css" />

</head>
<body >

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/terraform-validator/"><img class="navbar__logo" src="/terraform-validator/img/terraform-validator.svg" alt="Terraform-Validator"/><strong class=""></strong></a><a class="navbar__item navbar__link" href="/terraform-validator/docs/getting-started/introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://hub.docker.com/r/thazelart/terraform-validator">DockerHub</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/thazelart/terraform-validator">GitHub</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"/></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/terraform-validator/"><img class="navbar__logo" src="/terraform-validator/img/terraform-validator.svg" alt="Terraform-Validator"/><strong></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/getting-started/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://hub.docker.com/r/thazelart/terraform-validator">DockerHub</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/thazelart/terraform-validator">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/getting-started/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/getting-started/install">Install</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/getting-started/first-steps">First steps</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/configuration/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/configuration/layers">Layers</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/configuration/current-layer">Current Layer</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/terraform-validator/docs/configuration/recursivity">Recursivity</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CI/CD</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/ci-cd/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/ci-cd/google-cloud-build">Google Cloud Build</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/ci-cd/github-actions">Github Actions</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/ci-cd/travis-ci">Travis CI</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/ci-cd/gitlab-ci">Gitlab CI</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/ci-cd/circle-ci">Circle CI</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/contributing/how-to-contribute">How to</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/contributing/code-of-conduct">Code of Conduct</a></li><li class="menu__list-item"><a class="menu__link" href="/terraform-validator/docs/contributing/thanks">Thanks !</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Recursivity</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="layers"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#layers" title="Direct link to heading">#</a>layers</h2><p>Each time you define a new layer in your <code>.terraform-validator.yaml</code>, this is added to terraform-validator configuration for the current directory and its sub-directories.</p><p>for example, here is my root directory configuration file:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-yaml codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># .terraform-validator.yaml</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">layers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cust1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">files</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">authorized_blocks</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> variable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> output</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> provider</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> terraform</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> module</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> locals</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ensure_providers_version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ensure_terraform_version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">block_pattern_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^[a-z0-9-]*$&quot;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Starting from the root directory and for all its sub-directories, <code>cust1</code> layer will be available.</p><p>If a sub-directory define another <code>cust1</code>, it will replace this configuration for this sub-directory and its own sub-directories.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="current_layer"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#current_layer" title="Direct link to heading">#</a>current_layer</h2><p>The default <code>current_layer</code> is by default the one choosen in the parent directory.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="tips"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#tips" title="Direct link to heading">#</a>tips</h2><p>During on journey through your stacks and terraform modules, terraform-validator won&#x27;t run test in folders that do not contain any <code>.tf</code> files BUT will read the configurations.<br/>
<!-- -->That way, you can easily configure a large number of folders at once. Let&#x27;s take this example:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-bash codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">-- modules</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">   </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">-- .terraform-validator.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">   </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable" style="color:rgb(191, 199, 213)">-- mod1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token variable" style="color:rgb(191, 199, 213)"></span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">       </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">-- README.md</span></div><div class="token-line" style="color:#bfc7d5"><span class="token variable" style="color:rgb(191, 199, 213)"></span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">       </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">-- main.tf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token variable" style="color:rgb(191, 199, 213)"></span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">       </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token plain">-- provider.tf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">   </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable" style="color:rgb(191, 199, 213)">-- mod2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token variable" style="color:rgb(191, 199, 213)"></span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">       </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">-- README.md</span></div><div class="token-line" style="color:#bfc7d5"><span class="token variable" style="color:rgb(191, 199, 213)"></span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">       </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">-- main.tf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token variable" style="color:rgb(191, 199, 213)"></span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)">       </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token plain">-- provider.tf</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The <code>.terraform-validator.yaml</code> file inside the <code>modules</code> folder define the configuration for both <code>mod1</code> and <code>mod2</code> !</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/terraform-validator/docs/configuration/current-layer"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->Current Layer</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/terraform-validator/docs/ci-cd/introduction"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Introduction<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#layers" class="contents__link">layers</a></li><li><a href="#current_layer" class="contents__link">current_layer</a></li><li><a href="#tips" class="contents__link">tips</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center">Copyright © 2020 thazelart, built with Docusaurus.</div></div></footer>
</div>

<script type="text/javascript" src="/terraform-validator/styles.eaa8985c.js"></script>

<script type="text/javascript" src="/terraform-validator/runtime~main.4114fe0b.js"></script>

<script type="text/javascript" src="/terraform-validator/main.c82cc856.js"></script>

<script type="text/javascript" src="/terraform-validator/1.c6480977.js"></script>

<script type="text/javascript" src="/terraform-validator/24.4220d5fb.js"></script>

<script type="text/javascript" src="/terraform-validator/bc31dbb8.08e1b19d.js"></script>

<script type="text/javascript" src="/terraform-validator/17896441.ef1828a1.js"></script>

<script type="text/javascript" src="/terraform-validator/f89a0118.9d6cc837.js"></script>


</body>
</html>